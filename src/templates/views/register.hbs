<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Arimo:wght@500&family=Baloo+Bhai+2:wght@700&family=Bebas+Neue&family=Josefin+Sans:ital,wght@1,200&family=League+Spartan:wght@700&family=Lobster&family=Poppins:wght@300&family=Rubik:wght@300&family=Ubuntu:wght@300&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../css/register.css">
</head>
<body>{{>navbar}}
    <div class="subcontainer">
    <form action="/submitform" method="post" class="formcontainer" onsubmit="process(event)">
    <h2 class="font border-set">Register</h2>
    <li class="list-container">
    <label for="name">Name: </label><br>
    <input type="text" name="name" class="input-container" autocomplete="off" id="name">
    <div class="error" id="nameerror">Invalid name!</div>
    </li>
    {{!-- <br> --}}
    <li class="list-container">
    <label for="email">Email:</label><br>
    <input type="text" name="email" class="input-container" autocomplete="off" id="email">
    <div class="error" id="emailerror">Invalid email!</div>
    </li>
    {{!-- <br> --}}
    <li class="list-container">
    <label for="currentbalance">Current Balance: </label><br>
    <input type="text" name="currentbalance" class="input-container" autocomplete="off" id="balance">
    <div class="error" id="balanceerror">Invalid balance!</div>
    </li>
    {{!-- <br> --}}
    <li class="list-container">
    <label for="phoneno">Phone No:</label><br>
    <input type="text" name="phoneno" class="input-container" autocomplete="off" id="phone">
    <div class="error" id="phoneerror">Invalid phoneno!</div>
    </li>
    {{!-- <br> --}}
    <input type="submit" value="Register" class="list-container btn font">
    </form>
    </div>

    {{>footer}}
    <script>
        

const name = document.getElementById('name');
const nameerror = document.getElementById('nameerror');

const email = document.getElementById('email');
const emailerror = document.getElementById('emailerror');
const emailcheck = /^[A-Za-z_]{3,}@[A-Za-z]{3,}[.]{1}[A-Za-z.]{2,6}$/;

const balance = document.getElementById('balance');
const balanceerror = document.getElementById('balanceerror');

const phone = document.getElementById('phone');
const phoneerror = document.getElementById('phoneerror');

function process(event) {
    if (name.value == "") {
        event.preventDefault();
        nameerror.innerText = "Please fill this field!";
        nameerror.style.opacity = "1";
    }
    else if (name.value.length <= 2) {
        event.preventDefault();
        nameerror.innerText = "First name is too short!";
        nameerror.style.opacity = "1";
    }
    else {
        nameerror.style.opacity = "0";
        
    }
    
    if (email.value == "") {
        event.preventDefault();
        emailerror.innerText = "Please fill this field!";
        emailerror.style.opacity = "1";
    } else if (emailcheck.test(email.value)) {
        emailerror.innerText = "Valid Email.";
        emailerror.style.color = "green";
        emailerror.style.opacity = "1";
    }
    else {
        emailerror.style.opacity = "1";
        emailerror.style.color = "red";
        emailerror.innerText = "Invalid Email!";
    }

    if(balance.value.length == ""){
        event.preventDefault();
        balanceerror.innerText="Please fill this field!";
        balanceerror.style.opacity="1";
    }
    else if(balance.value < 0){
        event.preventDefault();
        balanceerror.innerText="Current balance can't be negative!";
        balanceerror.style.opacity="1";
    }
    else{
        balanceerror.style.opacity="0";
    }

    if (phone.value.length == 0) {
        event.preventDefault();
        phoneerror.innerText = "Please fill this field!";
        phoneerror.style.opacity= "1";
    }
    else if (phone.value.length < 10 || phone.value.length > 11) {
        event.preventDefault();
        phoneerror.innerText = "Phone no isn't correct!";
        phoneerror.style.opacity= "1";
    }
    else {
        phoneerror.style.opacity= "0";
    }
}

    </script>
</body>
</html>